// ===== Spanish Translations =====
const translations: Record<string, Record<string, string>> = {
  en: {
    "EN": "EN",
    "Home": "Home",
    "About": "About",
    "Media": "Media",
    "Work": "Work",
    "Towing Services": "Towing Services",
    "Testimonials": "Testimonials",
    "Contact": "Contact",
    "Links": "Links",
    "NEED TOWING SERVICE": "NEED TOWING SERVICE",
    "Our dedication to serve those in need is our pleasure": "Our dedication to serve those in need is our pleasure. Starting at $85. Don't waste time, CALL NOW!",
    "Get Assistance Now!": "Get Assistance Now!",
    "View Our Work": "View Our Work",
    "About the CEO": "About the CEO",
    "Founded by Javier Canepa": "Founded by Javier Canepa, Canepa's Towing has established itself as a premier Texas towing agency, working with forward-thinking in all our services we provide. We love our repeat customers and invite new clients who are ready to experience our success. You made us number 1!",
    "Our multidisciplinary team": "Our multidisciplinary team of strategists, focus on safe quality service, and team oriented quality-to collaborate a solution to those in need of our services. Our culture will never let you down if your car does. We are all about measurable business results.",
    "Tows Completing Each Month": "Tows Completing Each Month",
    "Client Satisfaction": "Client Satisfaction",
    "Selected Works": "Selected Works",
    "Explore our portfolio": "Explore our portfolio of premium towing projects that showcase our approach and capabilities.",
    "All": "All",
    "Sedans": "Sedans",
    "Trucks": "Trucks",
    "SUVs": "SUVs",
    "Other": "Other",
    "Towing services in Austin": "Towing services in Austin, TX Area\nWe Service Tows Starting $85.00:",
    "Fast, safe, and reliable": "Fast, safe, and reliable towing across Austin and nearby cities. 7 days a week, 6amâ€“7pm CT.",
    "Vehicle types we tow": "Vehicle types we tow",
    "All standard brands": "All standard brands; availability may vary by area.",
    "Classic cars": "Classic cars",
    "Flatbed recommended": "Flatbed recommended for high-clearance classics vehicles (additional fee).",
    "No commercial": "No commercial F-450, F-550 or similar models.",
    "SUVs, crossovers, vans": "SUVs, crossovers, vans",
    "Non-commercial only": "Nonâ€‘commercial only; call if unsure.",
    "No buses": "No buses",
    "We don't transport": "We don't transport commercial buses.",
    "Starting at $85": "Starting at $85. 100% totalâ€‘loss vehicles are not accepted.",
    "Service area in TX": "Service area in TX",
    "Further distances available": "Further distances available for transport to Austin metro; call for an estimate.",
    "How to get service": "How to get service",
    "Call": "Call",
    "Spanish or English": "Spanish (512)â€‘909â€‘6564 or English (737)â€‘382â€‘5082.",
    "Share details": "Share details",
    "Your name, vehicle": "Your name, vehicle type, and current location.",
    "Confirm": "Confirm",
    "We'll provide ETA": "We'll provide ETA and pricing before dispatch.",
    "Call English": "Call English",
    "Call Spanish": "Llama EspaÃ±ol",
    "Tows per month": "Tows per month",
    "Client satisfaction": "Client satisfaction",
    "Days a week": "Days a week",
    "Client Testimonials": "Client Testimonials",
    "Hear what our clients say": "Hear what our clients say about working with our team to transform their problems into positive experience.",
    "testimonial1": "I called Canepa's Towing when my SUV broke down in Round Rock. They arrived in under 30 minutes and handled everything professionally. Highly recommend!",
    "testimonial2": "They quoted me $100 and stuck to itâ€”no hidden fees. That kind of transparency is rare these days.",
    "testimonial3": "Great experience! The team was very helpful and made a stressful situation much easier.",
    "RCM Agent": "Austin City Service Department, RCM Agent",
    "Local Customer": "Local Customer",
    "Business Owner": "Business Owner",
    "Get In Touch": "Get In Touch",
    "Need a tow": "Need a tow? Let's make it simple. At Canepa's Towing, we're just one call away from getting you back on the road.",
    "Let's Collaborate": "Let's Collaborate",
    "We're proud to serve": "We're proud to serve our community with integrity and care. So whether it's a sedan, SUV, or classic car, Canepa's Towing is your go-to team when the unexpected happens.",
    "Our Services": "Our Services are a Phone Call Away",
    "Call us to get": "Call us to get you the help you need!",
    "Call Us": "Call Us (then) Text Us Your Information",
    "Quick Links": "Quick Links",
    "Services": "Services",
    "Towing Sedans": "Towing Sedans",
    "Classic Cars": "Classic Cars",
    "SUVs & Vans": "SUVs & Vans",
    "Connect With Us": "Connect With Us",
    "All rights reserved": "All rights reserved.",
    "footer-desc": "We're not just on the roadâ€”we're online too! Follow us for updates, behind-the-scenes, and customer stories from Austin and surrounding areas.",
    "Featured Tows": "ðŸ”¥ Featured Tows",
    "Recent Tows": "ðŸ“¹ Recent Tows",
    "Customer Stories": "â­ Customer Stories",
    "Highway Rescue": "Highway Rescue",
    "Quick response": "Quick response on I-35",
    "Downtown Tow": "Downtown Tow",
    "Austin downtown": "Austin downtown service",
    "Classic Car": "Classic Car Transport",
    "Careful handling": "Careful handling of vintage vehicle",
    "Night Service": "Night Service",
    "24/7 available": "24/7 available for emergencies",
    "SUV Towing": "SUV Towing",
    "Heavy duty": "Heavy duty towing service",
    "Roadside Assist": "Roadside Assistance",
    "Jump start": "Jump start and tire change",
    "Sedan Rescue": "Sedan Rescue",
    "Round Rock": "Round Rock area",
    "Truck Tow": "Truck Tow",
    "Georgetown": "Georgetown service",
    "Emergency Call": "Emergency Call",
    "Fast response": "Fast response time",
    "Long Distance": "Long Distance Tow",
    "Austin to San Antonio": "Austin to San Antonio",
    "Flatbed Service": "Flatbed Service",
    "Safe transport": "Safe transport guaranteed",
    "Happy Customer": "Happy Customer",
    "5 star review": "5 star review testimonial",
    "Family Saved": "Family Saved",
    "Roadside emergency": "Roadside emergency help",
    "Business Partner": "Business Partner",
    "Fleet service": "Fleet service excellence",
    "Repeat Customer": "Repeat Customer",
    "Loyal client": "Loyal client testimonial",
    "Canepa's Towing": "Canepa's Towing",
    "Austin's Premier": "Austin's Premier Towing Service",
    "24/7 Emergency": "24/7 Emergency Towing â€¢ Starting at $85",
    "Contact Us": "ðŸ“ž Contact Us",
    "Call English Line": "Call English Line",
    "Call Spanish Line": "Llamar LÃ­nea EspaÃ±ol",
    "WhatsApp": "WhatsApp Us",
    "Quick chat": "Quick chat support",
    "Email": "Email Us",
    "Follow Us": "ðŸŒŸ Follow Us",
    "Updates": "Updates & Photos",
    "Daily content": "Daily content & stories",
    "Videos": "Videos & Tutorials",
    "Short videos": "Short videos & tips",
    "Quick Links Menu": "âš¡ Quick Links",
    "About Us": "About Us",
    "Our story": "Our story & mission",
    "Services Pricing": "Services & Pricing",
    "Starting at": "Starting at $85",
    "TowingFlix": "TowingFlix Media",
    "Watch": "Watch our work",
    "Reviews": "Customer Reviews",
    "98%": "98% satisfaction rate",
    "Open 7 days": "Open 7 days a week â€¢ 6am - 7pm CT",
    "Serving": "Serving Austin, Round Rock, Georgetown & surrounding areas"
  },
  es: {
    "EN": "ES",
    "Home": "Inicio",
    "About": "Acerca de",
    "Media": "Medios",
    "Work": "Trabajos",
    "Towing Services": "Servicios de GrÃºa",
    "Testimonials": "Testimonios",
    "Contact": "Contacto",
    "Links": "Enlaces",
    "NEED TOWING SERVICE": "Â¿NECESITA SERVICIO DE GRÃšA?",
    "Our dedication to serve those in need is our pleasure": "Nuestra dedicaciÃ³n a servir a quienes lo necesitan es nuestro placer. Desde $85. Â¡No pierdas tiempo, LLAMA AHORA!",
    "Get Assistance Now!": "Â¡ObtÃ©n Asistencia Ahora!",
    "View Our Work": "Ver Nuestro Trabajo",
    "About the CEO": "Acerca del CEO",
    "Founded by Javier Canepa": "Fundada por Javier Canepa, Canepa's Towing se ha establecido como una agencia de remolque premier en Texas, trabajando con visiÃ³n de futuro en todos nuestros servicios. Â¡Amamos a nuestros clientes habituales e invitamos a nuevos clientes que estÃ©n listos para experimentar nuestro Ã©xito. Â¡Nos hiciste nÃºmero 1!",
    "Our multidisciplinary team": "Nuestro equipo multidisciplinario de estrategas se enfoca en servicio de calidad seguro y orientado al trabajo en equipo para colaborar en una soluciÃ³n para aquellos que necesitan nuestros servicios. Nuestra cultura nunca te defraudarÃ¡ si tu auto lo hace. Nos centramos en resultados comerciales medibles.",
    "Tows Completing Each Month": "Remolques Completados Cada Mes",
    "Client Satisfaction": "SatisfacciÃ³n del Cliente",
    "Selected Works": "Trabajos Seleccionados",
    "Explore our portfolio": "Explore nuestro portafolio de proyectos de remolque premium que muestran nuestro enfoque y capacidades.",
    "All": "Todos",
    "Sedans": "Sedanes",
    "Trucks": "Camionetas",
    "SUVs": "SUVs",
    "Other": "Otros",
    "Towing services in Austin": "Servicios de remolque en el Ã¡rea de Austin, TX\nRemolques desde $85.00:",
    "Fast, safe, and reliable": "Remolque rÃ¡pido, seguro y confiable en Austin y ciudades cercanas. 7 dÃ­as a la semana, 6amâ€“7pm CT.",
    "Vehicle types we tow": "Tipos de vehÃ­culos que remolcamos",
    "All standard brands": "Todas las marcas estÃ¡ndar; la disponibilidad puede variar segÃºn el Ã¡rea.",
    "Classic cars": "Autos clÃ¡sicos",
    "Flatbed recommended": "Plataforma recomendada para vehÃ­culos clÃ¡sicos de alto despeje (tarifa adicional).",
    "No commercial": "No F-450, F-550 comerciales o modelos similares.",
    "SUVs, crossovers, vans": "SUVs, crossovers, vans",
    "Non-commercial only": "Solo no comerciales; llame si no estÃ¡ seguro.",
    "No buses": "No autobuses",
    "We don't transport": "No transportamos autobuses comerciales.",
    "Starting at $85": "Desde $85. No se aceptan vehÃ­culos con pÃ©rdida total del 100%.",
    "Service area in TX": "Ãrea de servicio en TX",
    "Further distances available": "Distancias mÃ¡s largas disponibles para transporte al Ã¡rea metropolitana de Austin; llame para obtener un presupuesto.",
    "How to get service": "CÃ³mo obtener servicio",
    "Call": "Llamar",
    "Spanish or English": "EspaÃ±ol (512)â€‘909â€‘6564 o InglÃ©s (737)â€‘382â€‘5082.",
    "Share details": "Comparte detalles",
    "Your name, vehicle": "Tu nombre, tipo de vehÃ­culo y ubicaciÃ³n actual.",
    "Confirm": "Confirmar",
    "We'll provide ETA": "Proporcionaremos ETA y precio antes del despacho.",
    "Call English": "Llamar InglÃ©s",
    "Call Spanish": "Llama EspaÃ±ol",
    "Tows per month": "Remolques por mes",
    "Client satisfaction": "SatisfacciÃ³n del cliente",
    "Days a week": "DÃ­as a la semana",
    "Client Testimonials": "Testimonios de Clientes",
    "Hear what our clients say": "Escucha lo que nuestros clientes dicen sobre trabajar con nuestro equipo para transformar sus problemas en experiencias positivas.",
    "testimonial1": "LlamÃ© a Canepa's Towing cuando mi SUV se descompuso en Round Rock. Llegaron en menos de 30 minutos y manejaron todo profesionalmente. Â¡Altamente recomendado!",
    "testimonial2": "Me cotizaron $100 y se mantuvieron en eso, sin tarifas ocultas. Ese tipo de transparencia es rara en estos dÃ­as.",
    "testimonial3": "Â¡Gran experiencia! El equipo fue muy servicial e hizo que una situaciÃ³n estresante fuera mucho mÃ¡s fÃ¡cil.",
    "RCM Agent": "Departamento de Servicio de la Ciudad de Austin, Agente RCM",
    "Local Customer": "Cliente Local",
    "Business Owner": "DueÃ±o de Negocio",
    "Get In Touch": "Ponte en Contacto",
    "Need a tow": "Â¿Necesitas un remolque? HagÃ¡moslo simple. En Canepa's Towing, estamos a solo una llamada de distancia para ponerte de nuevo en el camino.",
    "Let's Collaborate": "Colaboremos",
    "We're proud to serve": "Nos enorgullece servir a nuestra comunidad con integridad y cuidado. Ya sea un sedÃ¡n, SUV o auto clÃ¡sico, Canepa's Towing es tu equipo de referencia cuando ocurre lo inesperado.",
    "Our Services": "Nuestros Servicios estÃ¡n a una Llamada de Distancia",
    "Call us to get": "Â¡LlÃ¡manos para obtener la ayuda que necesitas!",
    "Call Us": "LlÃ¡manos (luego) EnvÃ­anos tu InformaciÃ³n por Texto",
    "Quick Links": "Enlaces RÃ¡pidos",
    "Services": "Servicios",
    "Towing Sedans": "Remolque de Sedanes",
    "Classic Cars": "Autos ClÃ¡sicos",
    "SUVs & Vans": "SUVs y Vans",
    "Connect With Us": "ConÃ©ctate con Nosotros",
    "All rights reserved": "Todos los derechos reservados.",
    "footer-desc": "Â¡No solo estamos en el camino, tambiÃ©n estamos en lÃ­nea! SÃ­guenos para actualizaciones, detrÃ¡s de escena e historias de clientes de Austin y Ã¡reas circundantes.",
    "Featured Tows": "ðŸ”¥ Remolques Destacados",
    "Recent Tows": "ðŸ“¹ Remolques Recientes",
    "Customer Stories": "â­ Historias de Clientes",
    "Highway Rescue": "Rescate en Autopista",
    "Quick response": "Respuesta rÃ¡pida en I-35",
    "Downtown Tow": "Remolque Centro",
    "Austin downtown": "Servicio centro de Austin",
    "Classic Car": "Transporte de Auto ClÃ¡sico",
    "Careful handling": "Manejo cuidadoso de vehÃ­culo vintage",
    "Night Service": "Servicio Nocturno",
    "24/7 available": "Disponible 24/7 para emergencias",
    "SUV Towing": "Remolque de SUV",
    "Heavy duty": "Servicio de remolque pesado",
    "Roadside Assist": "Asistencia en Carretera",
    "Jump start": "Arranque y cambio de neumÃ¡tico",
    "Sedan Rescue": "Rescate de SedÃ¡n",
    "Round Rock": "Ãrea de Round Rock",
    "Truck Tow": "Remolque de Camioneta",
    "Georgetown": "Servicio Georgetown",
    "Emergency Call": "Llamada de Emergencia",
    "Fast response": "Tiempo de respuesta rÃ¡pido",
    "Long Distance": "Remolque de Larga Distancia",
    "Austin to San Antonio": "Austin a San Antonio",
    "Flatbed Service": "Servicio de Plataforma",
    "Safe transport": "Transporte seguro garantizado",
    "Happy Customer": "Cliente Feliz",
    "5 star review": "Testimonio de 5 estrellas",
    "Family Saved": "Familia Salvada",
    "Roadside emergency": "Ayuda de emergencia en carretera",
    "Business Partner": "Socio Comercial",
    "Fleet service": "Excelencia en servicio de flotilla",
    "Repeat Customer": "Cliente Recurrente",
    "Loyal client": "Testimonio de cliente leal",
    "Canepa's Towing": "Canepa's Towing",
    "Austin's Premier": "Premier Servicio de Remolque de Austin",
    "24/7 Emergency": "Remolque de Emergencia 24/7 â€¢ Desde $85",
    "Contact Us": "ðŸ“ž ContÃ¡ctanos",
    "Call English Line": "Llamar LÃ­nea InglÃ©s",
    "Call Spanish Line": "Llamar LÃ­nea EspaÃ±ol",
    "WhatsApp": "WhatsApp",
    "Quick chat": "Soporte de chat rÃ¡pido",
    "Email": "EnvÃ­anos un Correo",
    "Follow Us": "ðŸŒŸ SÃ­guenos",
    "Updates": "Actualizaciones y Fotos",
    "Daily content": "Contenido diario e historias",
    "Videos": "Videos y Tutoriales",
    "Short videos": "Videos cortos y consejos",
    "Quick Links Menu": "âš¡ Enlaces RÃ¡pidos",
    "About Us": "Acerca de Nosotros",
    "Our story": "Nuestra historia y misiÃ³n",
    "Services Pricing": "Servicios y Precios",
    "Starting at": "Desde $85",
    "TowingFlix": "TowingFlix Medios",
    "Watch": "Ver nuestro trabajo",
    "Reviews": "ReseÃ±as de Clientes",
    "98%": "98% de satisfacciÃ³n",
    "Open 7 days": "Abierto 7 dÃ­as a la semana â€¢ 6am - 7pm CT",
    "Serving": "Sirviendo Austin, Round Rock, Georgetown y Ã¡reas circundantes"
  }
};

let currentLanguage: 'en' | 'es' = 'en';

// ===== Translation Function =====
function translatePage(lang: 'en' | 'es'): void {
  currentLanguage = lang;
  const elements = document.querySelectorAll('[data-translate]');

  elements.forEach((element) => {
    const key = element.getAttribute('data-translate');
    if (key && translations[lang][key]) {
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
        (element as HTMLInputElement).placeholder = translations[lang][key];
      } else {
        element.textContent = translations[lang][key];
      }
    }
  });

  // Update translate button
  const translateBtn = document.getElementById('translateBtn');
  if (translateBtn) {
    const span = translateBtn.querySelector('span');
    if (span) {
      span.textContent = lang === 'en' ? 'EN' : 'ES';
    }
  }

  // Save preference
  localStorage.setItem('preferredLanguage', lang);
}

// ===== Mobile Menu Toggle =====
function initMobileMenu(): void {
  const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
  const mainNav = document.querySelector('.main-nav');
  const navLinks = document.querySelectorAll('.main-nav a');

  if (mobileMenuBtn && mainNav) {
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenuBtn.classList.toggle('active');
      mainNav.classList.toggle('active');
    });

    // Close menu when clicking on a link
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenuBtn.classList.remove('active');
        mainNav.classList.remove('active');
      });
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      const target = e.target as HTMLElement;
      if (!target.closest('.main-nav') && !target.closest('.mobile-menu-btn')) {
        mobileMenuBtn.classList.remove('active');
        mainNav.classList.remove('active');
      }
    });
  }
}

// ===== Header Scroll Effect =====
function initHeaderScroll(): void {
  const header = document.getElementById('header');
  if (!header) return;

  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      header.classList.add('scrolled');
    } else {
      header.classList.remove('scrolled');
    }
  });
}

// ===== Portfolio Filter =====
function initPortfolioFilter(): void {
  const filterButtons = document.querySelectorAll('.portfolio-nav button');
  const portfolioItems = document.querySelectorAll('.portfolio-item');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      // Remove active class from all buttons
      filterButtons.forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      button.classList.add('active');

      const category = button.getAttribute('data-category');

      portfolioItems.forEach(item => {
        if (category === 'all' || item.getAttribute('data-category') === category) {
          (item as HTMLElement).style.display = 'block';
        } else {
          (item as HTMLElement).style.display = 'none';
        }
      });
    });
  });
}

// ===== Testimonial Slider =====
function initTestimonialSlider(): void {
  const testimonialCards = document.querySelectorAll('.testimonial-card');
  const leftArrow = document.querySelector('.testimonial-arrow.left');
  const rightArrow = document.querySelector('.testimonial-arrow.right');
  let currentIndex = 0;

  function showTestimonial(index: number): void {
    testimonialCards.forEach((card, i) => {
      (card as HTMLElement).style.display = i === index ? 'block' : 'none';
    });
  }

  if (testimonialCards.length > 0) {
    showTestimonial(currentIndex);

    if (leftArrow) {
      leftArrow.addEventListener('click', () => {
        currentIndex = (currentIndex - 1 + testimonialCards.length) % testimonialCards.length;
        showTestimonial(currentIndex);
      });
    }

    if (rightArrow) {
      rightArrow.addEventListener('click', () => {
        currentIndex = (currentIndex + 1) % testimonialCards.length;
        showTestimonial(currentIndex);
      });
    }

    // Auto-advance every 5 seconds
    setInterval(() => {
      currentIndex = (currentIndex + 1) % testimonialCards.length;
      showTestimonial(currentIndex);
    }, 5000);
  }
}

// ===== Media Carousel =====
function initMediaCarousel(): void {
  const carousels = document.querySelectorAll('.media-carousel');

  carousels.forEach(carousel => {
    const track = carousel.querySelector('.media-track');
    const prevBtn = carousel.querySelector('.carousel-btn.prev');
    const nextBtn = carousel.querySelector('.carousel-btn.next');

    if (track && prevBtn && nextBtn) {
      const scrollAmount = 300;

      prevBtn.addEventListener('click', () => {
        track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
      });

      nextBtn.addEventListener('click', () => {
        track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
      });
    }
  });
}

// ===== Smooth Scrolling =====
function initSmoothScroll(): void {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (this: HTMLAnchorElement, e: Event) {
      e.preventDefault();
      const href = this.getAttribute('href');
      if (!href || href === '#') return;

      const target = document.querySelector(href);
      if (target) {
        const headerHeight = 80;
        const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - headerHeight;

        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
}

// ===== Fade-in Animation on Scroll =====
function initScrollAnimations(): void {
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.fade-in').forEach(el => {
    observer.observe(el);
  });
}

// ===== Initialize Everything =====
document.addEventListener('DOMContentLoaded', () => {
  // Load saved language preference
  const savedLang = localStorage.getItem('preferredLanguage') as 'en' | 'es' | null;
  if (savedLang) {
    translatePage(savedLang);
  }

  // Translation button
  const translateBtn = document.getElementById('translateBtn');
  if (translateBtn) {
    translateBtn.addEventListener('click', () => {
      const newLang = currentLanguage === 'en' ? 'es' : 'en';
      translatePage(newLang);
    });
  }

  // Initialize all features
  initMobileMenu();
  initHeaderScroll();
  initPortfolioFilter();
  initTestimonialSlider();
  initMediaCarousel();
  initSmoothScroll();
  initScrollAnimations();

  console.log('ðŸš› Canepa\'s Towing website loaded successfully!');
});
